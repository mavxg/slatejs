<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Slate Document Editor</title>

	<link rel="stylesheet" href="styles.css" />
</head>
<body>
<div id="preview">
</div>
<script type="text/javascript" src="slate.js"></script>
<script type="text/javascript">
var preview = document.getElementById('preview');
var e = Slate.editor;

var doc = Slate.parse('(doc (section ' +
	'(h1 "Welcome to SlateJS") ' +
	'(p "Welcome to your editor.") ' + 
	'(p "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Corrupti, aliquid ex necessitatibus repellatTM a illo fuga dolore aperiam totam tempore nisi neque delectus labore, nihil quae dignissimos dolores mollitia? Vel sunt neque voluptatibus excepturi laboriosam possimus adipisci quidem dolores, omnis nemo dolore eligendi blanditiis, voluptatem in doloribus hic aperiam.") ' + 
	'{"alignments":["left","right"]}(table '+
		'(row (cell "Some text to go in the cell") (cell "Header2")) ' +
		'(row (cell [[29,{}],[28,{"strong":true}],[17,{"strong":true,"em":true}],[20,{"em":true}]]"Text this is not bold before Some bold text to go in the bold italic cell. and not bold after.") {"rowSpan":2}(cell "99")) ' +
		'(row (cell [[29,{}],[28,{"strong":true}],[17,{"strong":true,"em":true}],[20,{"em":true}]]"Text this is not bold before Some bold text to go in the bold italic cell. and not bold after.")) ' +
		'(row {"colSpan":2}(cell [[29,{}],[28,{"strong":true}],[17,{"strong":true,"em":true}],[20,{"em":true}]]"Text this is not bold before Some bold text to go in the bold italic cell. and not bold after.")) ' +
	') ' + //end table
	') (section ' +
	'(h1 "Another Section") ' +
	'(p "Another paragraph in a another section") ' +
	'(ulli "First list item") ' +
	'(ulli "Second list item") ' +
	'(olli "First list item") ' +
	'(olli "Second list item") ' +
	'(blockquote "This is a really important quote.") ' +
	'(pullquote "This is another really important quote.") ' +
	'))')[0];


var dummy = new Slate.Dummy(Slate.ottypes);

var sjs = new Slate.sharejs.Connection(dummy);
sjs.debug = true;
var sharedoc = sjs.get('play','anonymous');
sharedoc.subscribe();


var store;

var editor;

sharedoc.whenReady(function() {
	if (!sharedoc.type) sharedoc.create('sexpr', doc);
	store = new Slate.Store(sharedoc);

	editor = e.Editor({store: store});

	e.friar.renderComponent(editor, preview);
});
//var tf = new e.Document({obj: doc});

</script>
</body>
</html>